{"ast":null,"code":"import { sha256 } from '@noble/hashes/sha256';\nimport { concatBytes, utf8ToBytes } from '@stacks/common';\nimport { decode, encode, encodingLength } from './varuint';\nconst chainPrefix = '\\x17Stacks Signed Message:\\n';\nexport function hashMessage(message) {\n  let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : chainPrefix;\n  return sha256(encodeMessage(message, prefix));\n}\nexport function encodeMessage(message) {\n  let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : chainPrefix;\n  const messageBytes = typeof message == 'string' ? utf8ToBytes(message) : message;\n  const encodedLength = encode(messageBytes.length);\n  return concatBytes(utf8ToBytes(prefix), encodedLength, messageBytes);\n}\nexport function decodeMessage(encodedMessage) {\n  let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : chainPrefix;\n  const prefixByteLength = utf8ToBytes(prefix).byteLength;\n  const messageWithoutChainPrefix = encodedMessage.subarray(prefixByteLength);\n  const decoded = decode(messageWithoutChainPrefix);\n  const varIntLength = encodingLength(decoded);\n  return messageWithoutChainPrefix.slice(varIntLength);\n}","map":{"version":3,"names":["sha256","concatBytes","utf8ToBytes","decode","encode","encodingLength","chainPrefix","hashMessage","message","prefix","arguments","length","undefined","encodeMessage","messageBytes","encodedLength","decodeMessage","encodedMessage","prefixByteLength","byteLength","messageWithoutChainPrefix","subarray","decoded","varIntLength","slice"],"sources":["C:\\Users\\abasi\\Desktop\\web3-apps\\react-cra\\node_modules\\@stacks\\encryption\\src\\messageSignature.ts"],"sourcesContent":["import { sha256 } from '@noble/hashes/sha256';\nimport { concatBytes, utf8ToBytes } from '@stacks/common';\nimport { decode, encode, encodingLength } from './varuint';\n\n// 'Stacks Signed Message:\\n'.length === 23\n// 'Stacks Signed Message:\\n'.length.toString(16) === 17\nconst chainPrefix = '\\x17Stacks Signed Message:\\n';\n\nexport function hashMessage(message: string, prefix: string = chainPrefix): Uint8Array {\n  return sha256(encodeMessage(message, prefix));\n}\n\nexport function encodeMessage(\n  message: string | Uint8Array,\n  prefix: string = chainPrefix\n): Uint8Array {\n  const messageBytes = typeof message == 'string' ? utf8ToBytes(message) : message;\n  const encodedLength = encode(messageBytes.length);\n  return concatBytes(utf8ToBytes(prefix), encodedLength, messageBytes);\n}\n\nexport function decodeMessage(\n  encodedMessage: Uint8Array,\n  prefix: string = chainPrefix\n): Uint8Array {\n  // Remove the chain prefix\n  const prefixByteLength = utf8ToBytes(prefix).byteLength;\n  const messageWithoutChainPrefix = encodedMessage.subarray(prefixByteLength);\n  const decoded = decode(messageWithoutChainPrefix);\n  const varIntLength = encodingLength(decoded);\n  // Remove the varint prefix\n  return messageWithoutChainPrefix.slice(varIntLength);\n}\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,sBAAsB;AAC7C,SAASC,WAAW,EAAEC,WAAW,QAAQ,gBAAgB;AACzD,SAASC,MAAM,EAAEC,MAAM,EAAEC,cAAc,QAAQ,WAAW;AAI1D,MAAMC,WAAW,GAAG,8BAA8B;AAElD,OAAM,SAAUC,WAAWA,CAACC,OAAe,EAA8B;EAAA,IAA5BC,MAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAiBJ,WAAW;EACvE,OAAON,MAAM,CAACa,aAAa,CAACL,OAAO,EAAEC,MAAM,CAAC,CAAC;AAC/C;AAEA,OAAM,SAAUI,aAAaA,CAC3BL,OAA4B,EACA;EAAA,IAA5BC,MAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAiBJ,WAAW;EAE5B,MAAMQ,YAAY,GAAG,OAAON,OAAO,IAAI,QAAQ,GAAGN,WAAW,CAACM,OAAO,CAAC,GAAGA,OAAO;EAChF,MAAMO,aAAa,GAAGX,MAAM,CAACU,YAAY,CAACH,MAAM,CAAC;EACjD,OAAOV,WAAW,CAACC,WAAW,CAACO,MAAM,CAAC,EAAEM,aAAa,EAAED,YAAY,CAAC;AACtE;AAEA,OAAM,SAAUE,aAAaA,CAC3BC,cAA0B,EACE;EAAA,IAA5BR,MAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAiBJ,WAAW;EAG5B,MAAMY,gBAAgB,GAAGhB,WAAW,CAACO,MAAM,CAAC,CAACU,UAAU;EACvD,MAAMC,yBAAyB,GAAGH,cAAc,CAACI,QAAQ,CAACH,gBAAgB,CAAC;EAC3E,MAAMI,OAAO,GAAGnB,MAAM,CAACiB,yBAAyB,CAAC;EACjD,MAAMG,YAAY,GAAGlB,cAAc,CAACiB,OAAO,CAAC;EAE5C,OAAOF,yBAAyB,CAACI,KAAK,CAACD,YAAY,CAAC;AACtD"},"metadata":{},"sourceType":"module","externalDependencies":[]}