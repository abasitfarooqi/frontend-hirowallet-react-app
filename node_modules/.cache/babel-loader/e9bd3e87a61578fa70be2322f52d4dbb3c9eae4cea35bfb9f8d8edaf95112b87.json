{"ast":null,"code":"export function isSubtleCryptoAvailable() {\n  return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\nexport function isNodeCryptoAvailable(withFeature) {\n  try {\n    const resolvedResult = require.resolve('crypto');\n    if (!resolvedResult) {\n      return false;\n    }\n    const cryptoModule = require('crypto');\n    if (!cryptoModule) {\n      return false;\n    }\n    if (withFeature) {\n      const features = withFeature(cryptoModule);\n      return features;\n    }\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\nexport const NO_CRYPTO_LIB = 'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.';\nexport async function getCryptoLib() {\n  if (isSubtleCryptoAvailable()) {\n    return {\n      lib: crypto.subtle,\n      name: 'subtleCrypto'\n    };\n  } else {\n    try {\n      const nodeCrypto = require('crypto');\n      return {\n        lib: nodeCrypto,\n        name: 'nodeCrypto'\n      };\n    } catch (error) {\n      throw new Error(NO_CRYPTO_LIB);\n    }\n  }\n}","map":{"version":3,"names":["isSubtleCryptoAvailable","crypto","subtle","isNodeCryptoAvailable","withFeature","resolvedResult","require","resolve","cryptoModule","features","error","NO_CRYPTO_LIB","getCryptoLib","lib","name","nodeCrypto","Error"],"sources":["C:\\Users\\abasi\\Desktop\\web3-apps\\react-cra\\node_modules\\@stacks\\encryption\\src\\cryptoUtils.ts"],"sourcesContent":["// @ts-ignore\nexport function isSubtleCryptoAvailable(): boolean {\n  return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\n\nexport function isNodeCryptoAvailable<T>(\n  withFeature: (nodeCrypto: typeof import('crypto')) => boolean | T\n): false | T;\nexport function isNodeCryptoAvailable<T>(\n  withFeature?: (nodeCrypto: typeof import('crypto')) => boolean | T\n): boolean | T {\n  try {\n    const resolvedResult = require.resolve('crypto');\n    if (!resolvedResult) {\n      return false;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    const cryptoModule = require('crypto') as typeof import('crypto');\n    if (!cryptoModule) {\n      return false;\n    }\n    if (withFeature) {\n      const features = withFeature(cryptoModule);\n      return features;\n    }\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport const NO_CRYPTO_LIB =\n  'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.';\n\nexport type TriplesecDecryptSignature = (\n  arg: { data: Uint8Array; key: Uint8Array },\n  cb: (err: Error | null, buff: Uint8Array | null) => void\n) => void;\n\nexport interface WebCryptoLib {\n  lib: SubtleCrypto;\n  name: 'subtleCrypto';\n}\n\nexport interface NodeCryptoLib {\n  lib: typeof import('crypto');\n  name: 'nodeCrypto';\n}\n\n// Make async for future version which may lazy load.\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function getCryptoLib(): Promise<WebCryptoLib | NodeCryptoLib> {\n  if (isSubtleCryptoAvailable()) {\n    return {\n      lib: crypto.subtle,\n      name: 'subtleCrypto',\n    };\n  } else {\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-var-requires\n      const nodeCrypto = require('crypto') as typeof import('crypto');\n      return {\n        lib: nodeCrypto,\n        name: 'nodeCrypto',\n      };\n    } catch (error) {\n      throw new Error(NO_CRYPTO_LIB);\n    }\n  }\n}\n"],"mappings":"AACA,OAAM,SAAUA,uBAAuBA,CAAA;EACrC,OAAO,OAAOC,MAAM,KAAK,WAAW,IAAI,OAAOA,MAAM,CAACC,MAAM,KAAK,WAAW;AAC9E;AAKA,OAAM,SAAUC,qBAAqBA,CACnCC,WAAkE;EAElE,IAAI;IACF,MAAMC,cAAc,GAAGC,OAAO,CAACC,OAAO,CAAC,QAAQ,CAAC;IAChD,IAAI,CAACF,cAAc,EAAE;MACnB,OAAO,KAAK;;IAGd,MAAMG,YAAY,GAAGF,OAAO,CAAC,QAAQ,CAA4B;IACjE,IAAI,CAACE,YAAY,EAAE;MACjB,OAAO,KAAK;;IAEd,IAAIJ,WAAW,EAAE;MACf,MAAMK,QAAQ,GAAGL,WAAW,CAACI,YAAY,CAAC;MAC1C,OAAOC,QAAQ;;IAEjB,OAAO,IAAI;GACZ,CAAC,OAAOC,KAAK,EAAE;IACd,OAAO,KAAK;;AAEhB;AAEA,OAAO,MAAMC,aAAa,GACxB,0GAA0G;AAmB5G,OAAO,eAAeC,YAAYA,CAAA;EAChC,IAAIZ,uBAAuB,EAAE,EAAE;IAC7B,OAAO;MACLa,GAAG,EAAEZ,MAAM,CAACC,MAAM;MAClBY,IAAI,EAAE;KACP;GACF,MAAM;IACL,IAAI;MAEF,MAAMC,UAAU,GAAGT,OAAO,CAAC,QAAQ,CAA4B;MAC/D,OAAO;QACLO,GAAG,EAAEE,UAAU;QACfD,IAAI,EAAE;OACP;KACF,CAAC,OAAOJ,KAAK,EAAE;MACd,MAAM,IAAIM,KAAK,CAACL,aAAa,CAAC;;;AAGpC"},"metadata":{},"sourceType":"module","externalDependencies":[]}